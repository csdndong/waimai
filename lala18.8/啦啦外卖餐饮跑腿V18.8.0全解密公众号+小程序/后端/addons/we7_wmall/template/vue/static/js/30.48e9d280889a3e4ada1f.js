webpackJsonp([30],{"9XRC":function(t,s){},UyNZ:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i={data:function(){return{goods_id:Number,goods:{},islegal:!1,username:"",mobile:""}},components:{PublicHeader:e("Cz8s").a},methods:{onLoad:function(){var t=this;this.util.request({url:"creditshop/order/create",data:{goods_id:this.goods_id}}).then(function(s){var e=s.data.message;if(e.errno)return t.util.$toast(e.message),!1;t.goods=e.message,t.islegal=!0})},onSubmit:function(){var t=this;if("goods"==this.goods.type){if(!this.username)return this.util.$toast("请输入姓名"),!1;if(!this.mobile)return this.util.$toast("请输入联系方式"),!1}if(!this.islegal)return!1;this.islegal=!1,this.util.request({url:"creditshop/order/submit",data:{goods_id:this.goods_id,username:this.username,mobile:this.mobile}}).then(function(s){var e=s.data.message;if(e.errno)return t.util.$toast(e.message),!1;var i=e.message.order_id,a={path:"/pages/creditshop/detail",query:{id:i}};"pay"==e.message.redirect?(a="/pages/public/pay?order_id="+i+"&order_type=creditshop",t.util.jsUrl(a)):t.util.$toast("兑换成功",t.util.getUrl(a))})}},created:function(){if(!this.$route.query.goods_id)return this.util.$toast("参数错误"),!1;this.goods_id=this.$route.query.goods_id},mounted:function(){this.onLoad()}},a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"creditshop-create"}},[e("public-header",{attrs:{title:"订单确认"}}),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"goods-info"},[t._m(0),t._v(" "),e("div",{staticClass:"padding-15-tb goods flex-lr van-hairline--bottom"},[e("div",{staticClass:"thumb"},[e("img",{staticClass:"img-100",attrs:{src:t.goods.thumb,alt:""}})]),t._v(" "),e("div",{staticClass:"info"},[e("p",[t._v(t._s(t.goods.title))]),t._v(" "),e("div",{staticClass:"flex"},[e("div",{staticClass:"c-danger"},[t._v(t._s(t.goods.use_credit1)+"积分 ")]),t._v(" "),t.goods.use_credit2>0?e("div",{staticClass:"c-danger"},[t._v(" + ¥"+t._s(t.goods.use_credit2))]):t._e(),t._v(" "),e("div",{staticClass:"c-gray font-12 line-through margin-5-l"},[t._v("¥"+t._s(t.goods.old_price))])])])]),t._v(" "),e("div",{staticClass:"padding-15-t total-price"},[e("div",{staticClass:"margin-15-l"},[e("span",[t._v("小计")]),e("span",{staticClass:"c-danger font-16 font-500"},[t._v("\n\t\t\t\t\t\t"+t._s(t.goods.use_credit1)+"积分\n\t\t\t\t\t\t"),t.goods.use_credit2>0?[t._v("\n\t\t\t\t\t\t\t+ "+t._s(t.goods.use_credit2)+"元\n\t\t\t\t\t\t")]:t._e()],2)])])]),t._v(" "),"goods"==t.goods.type?e("div",{staticClass:"margin-10"},[e("van-field",{attrs:{label:"姓名",type:"text",placeholder:"请输入您的名字","input-align":"right"},model:{value:t.username,callback:function(s){t.username="string"==typeof s?s.trim():s},expression:"username"}}),t._v(" "),e("van-field",{attrs:{label:"联系方式",type:"text",placeholder:"请输入您的联系方式","input-align":"right"},model:{value:t.mobile,callback:function(s){t.mobile=t._n(s)},expression:"mobile"}})],1):t._e()]),t._v(" "),e("van-submit-bar",{attrs:{disabled:!t.islegal,"button-text":"提交订单"},on:{submit:t.onSubmit}},[e("div",{staticClass:"order-total-field",attrs:{slot:"default"},slot:"default"},[t._v("\n\t\t\t待支付\n\t\t\t"),e("div",{staticClass:"order-total"},[t._v("\n\t\t\t\t"+t._s(t.goods.use_credit1)+"积分\n\t\t\t\t"),t.goods.use_credit2>0?[t._v("\n\t\t\t\t\t+ ¥"+t._s(t.goods.use_credit2)+"\n\t\t\t\t")]:t._e()],2)])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"flex"},[s("span",{staticClass:"font-14 font-500"},[this._v("商品信息")])])}]};var o=e("VU/8")(i,a,!1,function(t){e("9XRC")},null,null);s.default=o.exports}});
//# sourceMappingURL=30.48e9d280889a3e4ada1f.js.map