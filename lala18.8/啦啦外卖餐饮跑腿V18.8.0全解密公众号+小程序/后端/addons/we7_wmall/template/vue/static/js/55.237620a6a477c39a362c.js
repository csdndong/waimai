webpackJsonp([55],{"1wcS":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("Cz8s"),a=i("mzkE"),n=i("deIj"),o={components:{publicHeader:e.a,publicFooter:a.a},data:function(){return{isRefresh:!1,showPreLoading:!0,islegal:!1,menufooter:{},records:{page:1,psize:10,loading:!1,finished:!1,empty:!1,data:[]},stat:{},agreementMission:"",agreementMissionShow:!1}},methods:{onLoad:function(t){var s=this;Object(n.b)({vue:s,force:t,url:"svip/task/index",data:{menufooter:1},recordsName:"tasks",success:function(t){s.islegal=!0,s.stat=t.stat,s.agreementMission=t.agreementMission}})},onPullDownRefresh:function(){this.onLoad(!0)},onTakepart:function(t,s,i){var e=this;1!=s?e.islegal&&(e.islegal=!1,Object(n.c)({vue:e,url:"svip/task/takepart",data:{id:t},success:function(t){e.islegal=!0,e.util.$toast(t,"",1e3),e.onLoad(!0)},fail:function(t){e.islegal=!0,e.util.$toast(t.message,"",1e3)}})):e.$router.push(e.util.getUrl({path:i}))},onTogglePopup:function(){this.agreementMissionShow=!this.agreementMissionShow}},mounted:function(){this.onLoad()}},l={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"svip-mission"}},[i("public-header",{attrs:{title:"会员任务"}},[i("div",{attrs:{slot:"right"},on:{click:t.onTogglePopup},slot:"right"},[t._v("任务说明")])]),t._v(" "),i("public-footer",{attrs:{menufooter:t.menufooter,preLoading:t.showPreLoading}}),t._v(" "),i("div",{staticClass:"content"},[i("van-pull-refresh",{on:{refresh:function(s){return t.onPullDownRefresh()}},model:{value:t.isRefresh,callback:function(s){t.isRefresh=s},expression:"isRefresh"}},[i("div",{staticClass:"mission-header"},[i("div",{staticClass:"mission-title"},[t._v("做任务，赢好礼")]),t._v(" "),i("router-link",{staticClass:"mission-tips",attrs:{tag:"div",to:t.util.getUrl({path:"package/pages/svip/missionList"})}},[i("span",[t._v("已完成任务")]),t._v(" "),i("span",{staticClass:"num"},[t._v(t._s(t.stat.total_finish))]),t._v("个\n\t\t\t\t"),t._v(" "),i("i",{staticClass:"icon icon-right"})])],1),t._v(" "),i("div",{staticClass:"mission-group"},[i("div",{staticClass:"mission-group-title"},[t._v("会员任务任你选"),i("span",{staticClass:"font-12 c-gray padding-5-l"})]),t._v(" "),t.records.empty?i("div",{staticClass:"no-data"},[t._e(),t._v(" "),i("p",[t._v("暂无会员任务!")])]):i("van-list",{staticClass:"mission-list",attrs:{finished:t.records.finished,offset:100,"immediate-check":!1},on:{load:t.onLoad},model:{value:t.records.loading,callback:function(s){t.$set(t.records,"loading",s)},expression:"records.loading"}},t._l(t.records.data,function(s){return i("div",{key:s.id,staticClass:"flex-lr mission-item"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:s.thumb,alt:""}})]),t._v(" "),i("div",{staticClass:"mission-left flex-lr"},[i("div",{staticClass:"activity-info"},[i("div",{staticClass:"font-15 c-default"},[t._v(t._s(s.title))]),t._v(" "),i("div",{staticClass:"ellipsis"},[t._v(t._s(s.content))]),t._v(" "),i("div",{staticClass:"c-danger padding-5-t font-13"},[t._v(t._s(s.award_cn))])]),t._v(" "),i("div",{staticClass:"activity-price",on:{click:function(i){return t.onTakepart(s.id,s.button.link_type,s.button.link)}}},[i("div",{staticClass:"activity-but"},[t._v(t._s(s.button.text))])])])])}),0)],1),t._v(" "),t._e()])],1),t._v(" "),i("van-popup",{staticClass:"agreement-popup",attrs:{position:"bottom"},model:{value:t.agreementMissionShow,callback:function(s){t.agreementMissionShow=s},expression:"agreementMissionShow"}},[i("van-nav-bar",{staticClass:"border-0px",style:{background:"#ff2d4b",color:"#fff"},attrs:{title:"会员任务说明"},on:{"click-left":t.onTogglePopup}},[i("van-icon",{staticClass:"font-20",style:{color:"#fff"},attrs:{slot:"left",name:"left"},slot:"left"})],1),t._v(" "),i("div",{staticClass:"popup-content margin-10",domProps:{innerHTML:t._s(t.agreementMission)}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(t){i("KElv")},null,null);s.default=r.exports},KElv:function(t,s){}});