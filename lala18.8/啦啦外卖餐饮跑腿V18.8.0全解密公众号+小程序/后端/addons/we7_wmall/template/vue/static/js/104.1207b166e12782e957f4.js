webpackJsonp([104],{"+PAG":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{mobile:"",yzm:"",password:"",repassword:"",getCode:!0,code:{text:"获取验证码",downcount:60},captcha:"",captcha_img:""}},components:{PublicHeader:s("Cz8s").a},methods:{onLoad:function(){this.$route.query.mobile&&"undefined"!=this.$route.query.mobile&&(this.mobile=this.$route.query.mobile),this.onRefreshCaptcha()},onGetCode:function(){var t=this;return!!this.getCode&&(this.mobile?this.util.isValidMobile(this.mobile)?this.captcha?void this.util.request({url:"system/common/code",method:"POST",data:{mobile:this.mobile,captcha:this.captcha}}).then(function(e){var s=e.data.message;if(s.errno)return t.$toast(s.message),!1;t.code.text=t.code.downcount+"秒后重新获取";var a=setInterval(function(){t.code.downcount--,t.code.downcount<=0?(clearInterval(a),t.code.text="获取验证码",t.code.downcount=60,t.getCode=!0):t.code.text=t.code.downcount+"秒后重新获取"},1e3);t.$toast("验证码发送成功, 请注意查收")}):(this.$toast("请输入图形验证码"),!1):(this.$toast("手机号格式错误"),!1):(this.$toast("手机号不能为空"),!1))},onSubmit:function(){var t=this;if(!this.mobile)return this.$toast("手机号不能为空"),!1;if(!this.util.isValidMobile(this.mobile))return this.$toast("手机号格式错误"),!1;if(!this.yzm)return this.$toast("请输入短信验证码"),!1;if(!this.password)return this.$toast("密码不能为空"),!1;var e=this.password.length;if(e<8||e>20)return this.$toast("请输入8-20位密码"),!1;if(!/[0-9]+[a-zA-Z]+[0-9a-zA-Z]*|[a-zA-Z]+[0-9]+[0-9a-zA-Z]*/.test(this.password))return this.$toast("密码必须由数字和字母组合"),!1;if(!this.repassword)return this.$toast("请重复输入密码"),!1;if(this.password!=this.repassword)return this.$toast("两次密码输入不一致"),!1;var s={mobile:this.mobile,code:this.yzm,password:this.password,repassword:this.repassword};this.util.request({url:"wmall/member/profile/bind",data:s}).then(function(e){var s=e.data.message;if(t.$toast(s.message),s.errno)return!1;t.$router.push(t.util.getUrl({path:"/pages/member/profile"}))})},onRefreshCaptcha:function(){var t=this;this.util.request({url:"wmall/member/profile/captcha"}).then(function(e){t.captcha_img=e.data.message.message.captcha})}},mounted:function(){this.onLoad()}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"memberBind"}},[s("public-header",{attrs:{title:"更改绑定手机号"}}),t._v(" "),s("div",{staticClass:"content"},[s("van-cell-group",[s("van-field",{attrs:{label:"手机号",placeholder:"请输入手机号"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t._v(" "),s("van-field",{attrs:{type:"number",label:"图形验证码",placeholder:"请输入图形验证码"},model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}}),t._v(" "),s("van-field",{attrs:{label:"短信验证码",placeholder:"请输入短信验证码"},model:{value:t.yzm,callback:function(e){t.yzm=e},expression:"yzm"}},[60==t.code.downcount?s("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:function(e){return t.onGetCode()}},slot:"button"},[t._v(t._s(t.code.text))]):s("van-button",{attrs:{slot:"button",size:"small",type:"primary",disabled:""},slot:"button"},[t._v(t._s(t.code.text))])],1),t._v(" "),s("van-field",{attrs:{type:"password",label:"登录密码",placeholder:"请输入您的登录密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),s("van-field",{attrs:{type:"password",label:"确认密码",placeholder:"请输入确认登录密码"},model:{value:t.repassword,callback:function(e){t.repassword=e},expression:"repassword"}})],1),t._v(" "),s("div",{staticClass:"email-img",on:{click:t.onRefreshCaptcha}},[s("img",{attrs:{src:t.captcha_img,alt:""}})]),t._v(" "),s("div",{staticClass:"submit"},[s("van-button",{attrs:{size:"large",type:"danger"},on:{click:function(e){return t.onSubmit()}}},[t._v("立即绑定")])],1)],1)],1)},staticRenderFns:[]};var i=s("VU/8")(a,o,!1,function(t){s("D1Ed")},null,null);e.default=i.exports},D1Ed:function(t,e){}});
//# sourceMappingURL=104.1207b166e12782e957f4.js.map