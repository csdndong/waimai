webpackJsonp([101],{Hgoo:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Gu7T"),n=o.n(i),r=o("Dd8w"),a=o.n(r),s=o("NYxO"),c={name:"orderNote",components:{PublicHeader:o("Cz8s").a},data:function(){return{note:"",sid:Number,order_note:[],invoices:[],radio:0}},methods:a()({},Object(s.b)(["setOrderExtra"]),{onLoad:function(){var t=this;this.$route.query.sid?(this.sid=this.$route.query.sid,this.util.request({url:"wmall/order/create/note",data:{sid:this.sid}}).then(function(e){var o=e.data.message;o.errno?t.$toast(o.message):("1"==(o=o.message).store.invoice_status&&(t.invoices=[].concat(n()(t.invoices),n()(o.invoices))),t.order_note=[].concat(n()(t.order_note),n()(o.store.order_note)))})):this.$toast("参数错误")},onChooseLabel:function(t){this.note=this.note+" "+t},onSubmit:function(){this.radio>0&&this.setOrderExtra({key:"invoiceId",val:this.radio}),this.setOrderExtra({key:"note",val:this.note}),this.$router.replace(this.util.getUrl({path:"/pages/order/create?sid="+this.$route.query.sid}))}}),computed:a()({},Object(s.c)(["orderExtra"])),mounted:function(){this.note=this.orderExtra.note||"",this.radio=this.orderExtra.invoiceId||0,this.onLoad()}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"order-note"}},[o("public-header",{attrs:{title:"添加备注",bgcolor:"#f5f5f5",textcolor:"#000"}}),t._v(" "),o("div",{staticClass:"content"},[o("van-cell-group",{staticClass:"text"},[o("van-field",{attrs:{type:"textarea",placeholder:"请输入备注，最多50字哦"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}}),t._v(" "),t.order_note&&t.order_note.length>0?o("div",{staticClass:"label-box"},t._l(t.order_note,function(e){return o("div",{staticClass:"label",on:{click:function(o){return t.onChooseLabel(e)}}},[t._v(t._s(e))])}),0):t._e()],1),t._v(" "),o("van-radio-group",{staticClass:"margin-10-t",model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[o("van-cell-group",[o("van-cell",{attrs:{title:"发票"}}),t._v(" "),o("van-cell",{attrs:{title:"不需要发票",clickable:""},on:{click:function(e){t.radio=0}}},[o("van-radio",{attrs:{name:0}})],1),t._v(" "),t._l(t.invoices,function(e,i){return o("van-cell",{key:i,attrs:{title:e.title,clickable:""},on:{click:function(o){t.radio=e.id}}},[o("van-radio",{attrs:{name:e.id}})],1)})],2)],1),t._v(" "),o("div",{staticClass:"add-invoice",on:{click:function(e){return t.util.jsUrl("/pages/order/invoice",{sid:t.sid},"replace")}}},[o("i",{staticClass:"icon icon-roundadd"}),t._v("添加发票抬头")]),t._v(" "),o("div",{staticClass:"save-btn"},[o("van-button",{attrs:{type:"danger",size:"large"},on:{click:t.onSubmit}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var l=o("VU/8")(c,d,!1,function(t){o("TmdK")},null,null);e.default=l.exports},TmdK:function(t,e){}});
//# sourceMappingURL=101.b1677e0d49c5314e2920.js.map