webpackJsonp([126],{CKxG:function(t,e){},Hgoo:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("Gu7T"),n=i.n(o),r=i("Dd8w"),a=i.n(r),s=i("NYxO"),c={name:"orderNote",components:{PublicHeader:i("Cz8s").a},data:function(){return{note:"",sid:Number,order_note:[],invoices:[],radio:0,type:"note",showPreLoading:!0,invoiceTitle:"",title:"添加备注"}},methods:a()({},Object(s.b)(["setOrderExtra"]),{onLoad:function(){var t=this;this.$route.query.sid?(this.sid=this.$route.query.sid,this.util.request({url:"wmall/order/create/note",data:{sid:this.sid,type:this.type}}).then(function(e){t.showPreLoading=!1;var i=e.data.message;i.errno?t.$toast(i.message):(i=i.message,"note"==t.type?t.order_note=[].concat(n()(t.order_note),n()(i.store.order_note)):"invoice"==t.type&&(t.util.setWXTitle("添加发票"),t.title="添加发票",1==i.store.invoice_status?t.invoices=[].concat(n()(t.invoices),n()(i.invoices)):t.util.$toast("该门店不支持开发票",t.util.getUrl({path:"/pages/order/create",query:{sid:t.sid}}),1e3,"replace")))})):this.$toast("参数错误")},onChooseLabel:function(t){this.note=this.note+" "+t},onSubmit:function(){"note"==this.type?this.setOrderExtra({key:"note",val:this.note}):"invoice"==this.type&&this.radio>0&&(this.setOrderExtra({key:"invoiceId",val:this.radio}),this.setOrderExtra({key:"invoiceTitle",val:this.invoiceTitle})),this.$router.replace(this.util.getUrl({path:"/pages/order/create?sid="+this.$route.query.sid}))}}),computed:a()({},Object(s.c)(["orderExtra"])),mounted:function(){this.note=this.orderExtra.note||"",this.radio=this.orderExtra.invoiceId||0;var t=this.util.parseQuery(this.$route.query);t&&t.type&&(this.type=t.type),this.onLoad()}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"order-note"}},[i("public-header",{attrs:{title:"添加备注",bgcolor:"#f5f5f5",textcolor:"#000"}}),t._v(" "),i("div",{staticClass:"content"},["note"==t.type?[i("van-cell-group",{staticClass:"text"},[i("van-field",{attrs:{type:"textarea",placeholder:"请输入备注，最多50字哦"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}}),t._v(" "),t.order_note&&t.order_note.length>0?i("div",{staticClass:"label-box"},t._l(t.order_note,function(e){return i("div",{staticClass:"label",on:{click:function(i){return t.onChooseLabel(e)}}},[t._v(t._s(e))])}),0):t._e()],1)]:"invoice"==t.type?[i("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[i("van-cell-group",[i("van-cell",{attrs:{title:"发票"}}),t._v(" "),i("van-cell",{attrs:{title:"不需要发票",clickable:""},on:{click:function(e){t.radio=0}}},[i("van-radio",{attrs:{name:0}})],1),t._v(" "),t._l(t.invoices,function(e,o){return i("van-cell",{key:o,attrs:{title:e.title,clickable:""},on:{click:function(i){t.radio=e.id,t.invoiceTitle=e.title}}},[i("van-radio",{attrs:{name:e.id}})],1)})],2)],1),t._v(" "),i("div",{staticClass:"add-invoice",on:{click:function(e){return t.util.jsUrl("/pages/order/invoice",{sid:t.sid},"replace")}}},[i("i",{staticClass:"icon icon-roundadd"}),t._v("添加发票抬头")])]:t._e(),t._v(" "),i("div",{staticClass:"save-btn"},[i("van-button",{attrs:{type:"danger",size:"large"},on:{click:t.onSubmit}},[t._v("保存")])],1)],2),t._v(" "),i("transition",{attrs:{name:"loading"}},[t.showPreLoading?i("iloading"):t._e()],1)],1)},staticRenderFns:[]};var d=i("VU/8")(c,l,!1,function(t){i("CKxG")},null,null);e.default=d.exports}});
//# sourceMappingURL=126.cabbd649bc15137cbf6a.js.map